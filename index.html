<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bot IA Resumen MÃ³vil</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="phone">
    <div class="screen">
      <header>
        <div class="logo-wrap">
          <!-- SVG cerebro minimalista -->
          <svg id="brainIcon" width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 2.5C7.6 2.5 6.5 3.6 6.5 5C4.7 5 3.3 6.6 3.3 8.4C3.3 10.2 4.9 11.6 6.7 11.6H7v0.5C7 13.8 8.7 15.5 10.9 15.5H13C15 15.5 16.7 13.8 16.7 11.8V11.6H17c1.8 0 3.3-1.4 3.3-3.2 0-1.8-1.5-3.2-3.3-3.2C16.5 3.6 15.4 2.5 14 2.5c-1 0-1.8.5-2.4 1.2C11 2.9 10 2.5 9 2.5Z" stroke="#00ffcc" stroke-width="0.8" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h1 id="appTitle">Bot IA Resumen MÃ³vil</h1>
      </header>

      <main>
        <p id="subtitle">Pega tu texto o sube un archivo para resumirlo</p>

        <form id="form" action="/resumir" method="post" enctype="multipart/form-data">
          <textarea name="texto" id="texto" placeholder="Pega aquÃ­ tu texto..."></textarea>

          <div class="file-row">
            <label class="file-label">ðŸ“„</label>
            <input type="file" name="file" id="file" accept=".pdf,.txt">
            <span class="file-help" id="fileHelp">O sube .pdf o .txt</span>
          </div>

          <div class="controls">
            <select name="nivel" id="nivel">
              <option value="corto">Corto / Short</option>
              <option value="medio">Medio / Medium</option>
              <option value="detallado">Detallado / Detailed</option>
            </select>

            <input type="text" name="filename_user" id="filename_user" placeholder="resumen_reunion.txt" />

            <button type="submit" id="submitBtn">ðŸ’¾ Generar resumen</button>
          </div>
        </form>

        <div id="statusBox" class="status"></div>

        <div id="resultArea">
          {% if resumen %}
          <div class="resultado">
            <h2 id="resTitle">ðŸ§  Resumen generado</h2>
            <pre id="resumenText">{{ resumen }}</pre>

            <form method="post" action="/download" class="download-form">
              <input type="hidden" name="resumen_text" id="resumen_field" value="">
              <input type="text" name="filename" id="downloadName" placeholder="resumen.txt" />
              <button type="submit" class="download-btn">ðŸ’¾ Descargar resumen</button>
            </form>
          </div>
          {% endif %}
        </div>
      </main>

      <footer>
        <p id="footerText">Hecho por David CastaÃ±o ðŸ’¡</p>
      </footer>
    </div>
  </div>

<script>
/* BilingÃ¼e: detecta el idioma del navegador */
const lang = navigator.language || navigator.userLanguage;
const isEn = lang && lang.startsWith('en');

if (isEn) {
  document.getElementById('appTitle').innerText = 'Bot IA Resumen MÃ³vil';
  document.getElementById('subtitle').innerText = 'Paste your text or upload a file to summarize';
  document.getElementById('fileHelp').innerText = 'Or upload .pdf or .txt';
  document.getElementById('submitBtn').innerText = 'ðŸ’¾ Generate summary';
  document.getElementById('resTitle') && (document.getElementById('resTitle').innerText = 'ðŸ§  Generated summary');
  document.getElementById('footerText').innerText = 'Made by David CastaÃ±o ðŸ’¡';
}

/* simple UI feedback: show "Thinking..." with waves animation */
const form = document.getElementById('form');
const statusBox = document.getElementById('statusBox');
form && form.addEventListener('submit', () => {
  statusBox.innerHTML = '<div class="waves"><div></div><div></div><div></div></div><span>' + (isEn ? 'Thinkingâ€¦' : 'Pensandoâ€¦') + '</span>';
});
/* On download form attach resumen text */
const downloadForm = document.querySelector('.download-form');
if (downloadForm) {
  downloadForm.addEventListener('submit', function(e){
    const resumen = document.getElementById('resumenText');
    const field = document.getElementById('resumen_field');
    const name = document.getElementById('downloadName');
    if (resumen && field) {
      field.value = resumen.innerText.trim();
      if (name && name.value.trim() !== '') {
        // filename will be used
      } else {
        name.value = 'resumen.txt';
      }
    }
  });
}
</script>
</body>
</html>
